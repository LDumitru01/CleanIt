RewriteEngine On

# =====================================================
# 0. FORCE redirect ro/index.php & ru/index.php -> ro/ / ru/
# (PRIMA regulă, înainte de orice altceva)
# =====================================================
RewriteCond %{THE_REQUEST} \s/+cleanItV2/(ro|ru)/index\.php[\s?] [NC]
RewriteRule ^(ro|ru)/index\.php$ /cleanItV2/$1/ [R=301,L]

# =====================================================
# 1. Redirect root /cleanItV2/ -> /cleanItV2/ro/
# =====================================================
RewriteRule ^$ ro/ [L,R=301]

# =====================================================
# 2. Redirect duplicate language prefix (ro/ro/... -> ro/...)
# =====================================================
RewriteRule ^(ro|ru)/\1/(.*)$ /cleanItV2/$1/$2 [R=301,L]

# =====================================================
# 3. Elimină extensia .php din URL (extern)
# ex: /ro/price.php -> /ro/price
# =====================================================
RewriteCond %{THE_REQUEST} \s/+cleanItV2/(.+?)\.php[\s?] [NC]
RewriteRule ^(.+?)\.php$ /cleanItV2/$1 [R=301,L]

# =====================================================
# 4. Servește fișierele .php intern
# ex: /ro/price -> /ro/price.php
# =====================================================
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.+)$ $1.php [L]

# =====================================================
# 5. Asigură slash final pentru directoare
# ex: /ro -> /ro/
# =====================================================
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.+[^/])$ /cleanItV2/$1/ [L]

RewriteEngine On

# Dacă fișierul nu există ca folder
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

# Adaugă .php automat
RewriteRule ^(.+)$ $1.php [L]